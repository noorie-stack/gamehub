<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pong / Breakout</title>
  <style>
    body {
      background: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      flex-direction: column;
    }
    canvas {
      background: black;
      border: 3px solid white;
      display: block;
    }
    #controls {
      margin-top: 10px;
      display: none;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      margin: 5px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
    }
    #playAgain { background: green; color: white; }
    #returnBtn { background: red; color: white; }
  </style>
</head>
<body>
  <h2>ðŸŽ¾ Pong / Breakout ðŸŽ¾</h2>
  <canvas id="gameCanvas" width="600" height="400"></canvas>
  
  <div id="controls">
    <button id="playAgain" onclick="startGame()">ðŸ”„ Play Again</button>
    <button id="returnBtn" onclick="window.parent.goBack()">â¬… Return to Main Page</button>
  </div>

<script>
let canvas=document.getElementById("gameCanvas");
let ctx=canvas.getContext("2d");

let ball, paddle, bricks, dx, dy, gameInterval, gameOver;

function startGame(){
  document.getElementById("controls").style.display="none";
  ball={x:canvas.width/2, y:canvas.height-30, radius:10};
  dx=2; dy=-2;
  paddle={width:80, height:10, x:(canvas.width-80)/2, speed:7};
  gameOver=false;

  // bricks
  bricks=[];
  let rowCount=3, colCount=7, brickWidth=75, brickHeight=20, padding=10, offsetTop=30, offsetLeft=30;
  for(let c=0;c<colCount;c++){
    bricks[c]=[];
    for(let r=0;r<rowCount;r++){
      bricks[c][r]={x:0,y:0,status:1};
    }
  }

  document.addEventListener("keydown", keyDownHandler);
  document.addEventListener("keyup", keyUpHandler);
  gameInterval=setInterval(draw,10);
}

let rightPressed=false, leftPressed=false;
function keyDownHandler(e){ if(e.key==="Right"||e.key==="ArrowRight") rightPressed=true;
  else if(e.key==="Left"||e.key==="ArrowLeft") leftPressed=true; }
function keyUpHandler(e){ if(e.key==="Right"||e.key==="ArrowRight") rightPressed=false;
  else if(e.key==="Left"||e.key==="ArrowLeft") leftPressed=false; }

function drawBricks(){
  let rowCount=3, colCount=7, brickWidth=75, brickHeight=20, padding=10, offsetTop=30, offsetLeft=30;
  for(let c=0;c<colCount;c++){
    for(let r=0;r<rowCount;r++){
      if(bricks[c][r].status==1){
        let brickX=(c*(brickWidth+padding))+offsetLeft;
        let brickY=(r*(brickHeight+padding))+offsetTop;
        bricks[c][r].x=brickX;
        bricks[c][r].y=brickY;
        ctx.beginPath();
        ctx.rect(brickX,brickY,brickWidth,brickHeight);
        ctx.fillStyle="#ff33a6";
        ctx.fill();
        ctx.closePath();
      }
    }
  }
}

function collisionDetection(){
  for(let c=0;c<bricks.length;c++){
    for(let r=0;r<bricks[c].length;r++){
      let b=bricks[c][r];
      if(b.status==1){
        if(ball.x> b.x && ball.x< b.x+75 && ball.y> b.y && ball.y< b.y+20){
          dy=-dy;
          b.status=0;
          if(checkWin()){
            endGame("ðŸŽ‰ You Win!");
          }
        }
      }
    }
  }
}

function checkWin(){
  for(let c=0;c<bricks.length;c++){
    for(let r=0;r<bricks[c].length;r++){
      if(bricks[c][r].status==1) return false;
    }
  }
  return true;
}

function drawBall(){
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,ball.radius,0,Math.PI*2);
  ctx.fillStyle="white";
  ctx.fill();
  ctx.closePath();
}

function drawPaddle(){
  ctx.beginPath();
  ctx.rect(paddle.x,canvas.height-paddle.height-5,paddle.width,paddle.height);
  ctx.fillStyle="lime";
  ctx.fill();
  ctx.closePath();
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBricks();
  drawBall();
  drawPaddle();
  collisionDetection();

  if(ball.x+dx>canvas.width-ball.radius||ball.x+dx<ball.radius) dx=-dx;
  if(ball.y+dy<ball.radius) dy=-dy;
  else if(ball.y+dy>canvas.height-ball.radius){
    if(ball.x>paddle.x&&ball.x<paddle.x+paddle.width){ dy=-dy; }
    else { endGame("ðŸ’€ Game Over"); }
  }

  ball.x+=dx; ball.y+=dy;
  if(rightPressed && paddle.x<canvas.width-paddle.width) paddle.x+=paddle.speed;
  else if(leftPressed && paddle.x>0) paddle.x-=paddle.speed;
}

function endGame(msg){
  clearInterval(gameInterval);
  ctx.fillStyle="yellow";
  ctx.font="30px Arial";
  ctx.fillText(msg,canvas.width/2-80,canvas.height/2);
  gameOver=true;
  document.getElementById("controls").style.display="block";
}

startGame();
</script>
</body>
</html>
